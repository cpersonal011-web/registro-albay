<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Registro de Control de Agua - Albay</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f4; padding: 20px; }
        .card { background: white; padding: 20px; border-radius: 8px; max-width: 500px; margin: auto; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h2 { color: #004d40; text-align: center; }
        label { display: block; margin-top: 10px; font-weight: bold; }
        input, select, textarea { width: 100%; padding: 8px; margin-top: 5px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        .alerta { color: red; font-size: 0.8em; display: none; margin-top: 5px; }
        button { width: 100%; background: #004d40; color: white; border: none; padding: 10px; margin-top: 20px; border-radius: 4px; cursor: pointer; }
    </style>
</head>
<body>
    <div class="card">
        <h2>Control de Agua FO-CC-069</h2>
        <form id="registroAgua">
            <label>Ubicación:</label>
            <select id="ubicacion" required>
                <option value="Salida de cisterna">Salida de cisterna</option>
                <option value="Lavamanos">Lavamanos</option>
                <option value="Filtro Caldera">Filtro Caldera</option>
            </select>

            <label>Cloro Residual (0.5-1.0):</label>
            <input type="number" step="0.1" id="cloro" required oninput="validar()">
            <div id="alertCloro" class="alerta">⚠️ Valor fuera de rango. Debe dejar observación.</div>

            <label>pH (6.5-8.5):</label>
            <input type="number" step="0.1" id="ph" required oninput="validar()">
            <div id="alertPH" class="alerta">⚠️ Valor fuera de rango. Debe dejar observación.</div>

            <label>Observaciones:</label>
            <textarea id="observaciones"></textarea>

            <label>Horas Extra Trabajadas:</label>
            <input type="number" id="horasExtra" value="0">

            <button type="button" onclick="enviar()">Registrar Movimiento</button>
        </form>
    </div>

    <script>
        function validar() {
            const ph = document.getElementById('ph').value;
            const cloro = document.getElementById('cloro').value;
            const obs = document.getElementById('observaciones');
            
            // Mostrar alertas visuales
            document.getElementById('alertPH').style.display = (ph < 6.5 || ph > 8.5) ? 'block' : 'none';
            document.getElementById('alertCloro').style.display = (cloro < 0.5 || cloro > 1.0) ? 'block' : 'none';
            
            // Si hay error, la observación es obligatoria
            if ((ph < 6.5 || ph > 8.5) || (cloro < 0.5 || cloro > 1.0)) {
                obs.placeholder = "OBLIGATORIO: Explique el desvío...";
                obs.style.borderColor = "red";
            } else {
                obs.placeholder = "";
                obs.style.borderColor = "#ccc";
            }
        }

        function enviar() {
            alert("¡Registro enviado! (Aquí conectaríamos con tu Google Sheets)");
            // Aquí se añade el código de envío que te mencioné antes
        }
    </script>
</body>
</html>
